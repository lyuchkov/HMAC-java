# HMAC-SHA256 Message Signing Service

Учебный сервис на Java для обеспечения целостности данных. Сервис позволяет подписывать текстовые сообщения и проверять
подлинность полученных подписей с использованием алгоритма HMAC-SHA256.

## 1. Требования к окружению и установка

* **Java:** JDK 11 или выше.
* **Библиотеки:** Все необходимые .jar файлы должны находиться в папке `lib/` (gson, junit-jupiter-api,
  junit-jupiter-engine).

## 2. Сборка проекта

Т.к. в проекте нет системы сборки (Maven/Gradle), сборка выполняется вручную через компилятор `javac`.

```shell
javac -d out -cp "lib/*" $(find src/ -name "*.java")
```

## 3. Запуск сервера

```shell
java -cp "out:lib/*" ru.yandex.practicum.ServerHMAC
```

## 4. Конфигурация (config.json)

```json
{
  "hmacAlg": "HmacSHA256",
  "secret": "your-secret-string",
  "listenPort": 8080,
  "maxMsgSizeBytes": 1048576
}
```

## 5.Примеры curl

```shell
curl -X POST http://localhost:8080/sign \
     -H "Content-Type: application/json" \
     -d '{"msg": "Hello, World!"}'
{"signature":"Ybd_1lAznTsY8bKfc_cH0KSiiZzjgXBCBES5_o130-A"}
```

```shell
curl -X POST http://localhost:8080/verify \ 
     -H "Content-Type: application/json" \
     -d '{
       "msg": "Hello, World!",
       "signature": "Ybd_1lAznTsY8bKfc_cH0KSiiZzjgXBCBES5_o130-A"
     }'
{"isValid":true}
```

## 6. Ограничения

#### Данный проект является учебным и имеет ряд архитектурных упрощений:

* HMAC vs Асимметричная подпись: Используется симметричный алгоритм. Это означает, что и отправитель, и получатель
  должны знать один и тот же секрет. Это не является «электронной подписью» в юридическом смысле (не гарантирует
  неотказуемость).

* Единый ключ: Сервис поддерживает только один активный секрет. В промышленных системах обычно реализуется поддержка
  нескольких ключей (Key ID) для плавной ротации без простоя.

* Упрощенная ротация: Команда rotate-secret просто перезаписывает файл. В распределенных системах ротация требует
  синхронизированного обновления на всех узлах.

* Безопасность транспорта: Сервис работает по HTTP. В реальных условиях передача сообщений должна быть защищена слоем
  TLS (HTTPS).